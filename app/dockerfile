FROM python:3.11-slim

WORKDIR /app

# Instalar dependências do sistema
RUN apt-get update && apt-get install -y build-essential gcc && rm -rf /var/lib/apt/lists/*

# Copiar arquivos do projeto
COPY requirements.txt ./
COPY modelo-exportado-pipeline-autoai.pkl ./
COPY app.py ./

# Instalar dependências Python
RUN pip install --no-cache-dir \
    flask \
    numpy \
    scikit-learn==1.3.0 \
    xgboost==2.0.3 && \
    pip install --no-cache-dir autoai-libs==1.16.2 --no-deps

EXPOSE 5000

CMD ["python", "app.py"]
